<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title | default: site.title }}</title>
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/statblock.css">
</head>
<body>
    <!-- Header -->
    <header class="site-header">
        <div class="header-content">
            <!-- Hamburger Menu Button: Added to trigger the sidebar menu on this layout -->
            <button id="menu-toggle" aria-label="Toggle Navigation Menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>
            <h1 class="site-title">{{ site.title | default: "Hawthorne Field Guide" }}</h1>
            <nav class="site-nav">
                <a href="{{ site.baseurl }}/">Home</a>
                <a href="{{ site.baseurl }}/monsters/">Monsters</a>
                <a href="{{ site.baseurl }}/about/">About</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <div class="page">
        {{ content }}

        {% if page.image %}
        <div class="monster-image-container">
            <img src="{{ page.image | relative_url }}" alt="{{ page.title }}">
            {% if page.image_credit %}
            <p class="image-credit">{{ page.image_credit }}</p>
            {% endif %}
        </div>
        {% endif %}

        {% if page.description %}
        <div class="monster-description">
            {{ page.description | markdownify }}
        </div>
        {% endif %}
    </div>

    <!-- JAVASCRIPT FOR MENU INTERACTION -->
    <script>
        const menuToggle = document.getElementById('menu-toggle');
        const sidebarMenu = document.getElementById('sidebar-menu');
        const closeBtn = document.getElementById('close-menu-btn');
        const menuOverlay = document.getElementById('menu-overlay');
        const body = document.body;

        // Function to handle opening and closing the menu
        function toggleMenu() {
            const isOpen = sidebarMenu.classList.toggle('open');
            menuOverlay.classList.toggle('open');
            // 'menu-open' class prevents background content from scrolling
            body.classList.toggle('menu-open', isOpen);
        }

        // Attach listeners only if the toggle button exists on the page
        if (menuToggle) {
            menuToggle.addEventListener('click', toggleMenu);
        }
        
        // Close menu handlers
        closeBtn.addEventListener('click', toggleMenu);
        menuOverlay.addEventListener('click', toggleMenu);
        
        // Closes the menu if the screen is resized to desktop size while the menu is open
        window.addEventListener('resize', () => {
            // Check if the sidebar is open and the screen size is wider than 768px (desktop breakpoint)
            if (window.innerWidth > 768 && sidebarMenu.classList.contains('open')) {
                toggleMenu(); 
            }
        });
    </script>
</body>
</html>