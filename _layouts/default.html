<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title | default: site.title }}</title>
    <link rel="stylesheet" href="{{ '/assets/css/statblock.css' | relative_url }}">
</head>
<body>
    <!-- Header: Added the site header structure for the hamburger button and title -->
    <header class="site-header">
        <div class="header-content">
            <!-- Hamburger Menu Button -->
            <button id="menu-toggle" aria-label="Toggle Navigation Menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>
            <h1 class="site-title">{{ site.title | default: "Hawthorne Field Guide" }}</h1>
        </div>
    </header>

    <!-- OFF-CANVAS SIDEBAR MENU (Hidden off-screen by default) -->
    <div id="sidebar-menu">
        <div class="sidebar-header">
            <h4 class="sidebar-title">Menu</h4>
            <button id="close-menu-btn" class="close-btn" aria-label="Close Menu">&times;</button>
        </div>
        <!-- UPDATED: Navigation links as requested -->
        <div class="sidebar-nav">
            <!-- Home link, points to index.html -->
            <a href="{{ site.baseurl }}/">Home</a>
            <!-- Hawthorne Player's Guide link, external, opens in new tab -->
            <a href="https://sites.google.com/view/hawthorne-players-guide/home" target="_blank">Hawthorne Player's Guide</a>
        </div>
        <!-- Removed divider and old external links for a simpler menu -->
    </div>

    <!-- MENU OVERLAY (Dark background that appears when menu is open) -->
    <div id="menu-overlay"></div>

    <div class="page">
        {{ content }}
    </div>

    <footer class="site-footer">
        <div class="footer-content">
            <p>Hawthorne Guild</p>
        </div>
    </footer>

    <!-- JAVASCRIPT FOR MENU INTERACTION -->
    <script>
        const menuToggle = document.getElementById('menu-toggle');
        const sidebarMenu = document.getElementById('sidebar-menu');
        const closeBtn = document.getElementById('close-menu-btn');
        const menuOverlay = document.getElementById('menu-overlay');
        const body = document.body;

        // Function to handle opening and closing the menu
        function toggleMenu() {
            const isOpen = sidebarMenu.classList.toggle('open');
            menuOverlay.classList.toggle('open');
            // 'menu-open' class prevents background content from scrolling
            body.classList.toggle('menu-open', isOpen);
        }

        // Attach listeners only if the toggle button exists on the page
        if (menuToggle) {
            menuToggle.addEventListener('click', toggleMenu);
        }
        
        // Close menu handlers
        closeBtn.addEventListener('click', toggleMenu);
        menuOverlay.addEventListener('click', toggleMenu);
        
        // Closes the menu if the screen is resized to desktop size while the menu is open
        window.addEventListener('resize', () => {
            // Check if the sidebar is open and the screen size is wider than 768px (desktop breakpoint)
            if (window.innerWidth > 768 && sidebarMenu.classList.contains('open')) {
                toggleMenu(); 
            }
        });
    </script>
</body>
</html>